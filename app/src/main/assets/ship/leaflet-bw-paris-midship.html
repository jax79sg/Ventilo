<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../leaflet/leaflet.css"
          crossorigin=""/>
    <link rel="stylesheet" href="../js/leaflet-bft.css"
          crossorigin=""/>

    <script src="../leaflet/leaflet.js"
            crossorigin=""></script>
    <script src="../js/anglemarker-plugin.js"
            crossorigin=""></script>
    <script src="../js/leaflet-bft.js"
            crossorigin=""></script>
    <script src="../js/stomp.js"
            crossorigin=""></script>
    <script src="../js/bft-tracks-front.js"
            crossorigin=""></script>
    <script src="../js/leaflet-mobile.js"
            crossorigin=""></script>

    <title>BFT Web Map - Leaflet</title>
</head>
<body>
<div id="mapdeck"></div>

<script>
    var gaScale = 300 * 110 / 105;                              // GA scale 1cm to 300 cm (multiply by factor; referencing 'A' deck)
    var gaStandardScale = 300;                                  // GA standard scale 1cm to 300 cm
    var pxWidth = 2048;                                         // Width of GA cut out
    var metreWidth = (36.12 * gaStandardScale) / 100;           // Width measure from GA cut out; 323.69 (previously calculated)
    var factor = pxWidth / metreWidth;                          // 47.28 (needs to be this value for accuracy)
    var imageoverlay = '../ship/BW_Paris_Midship.png';
    var lowerleftx = -18.06 * gaScale / 100 * factor;           // -1024 (previously calculated)
    var lowerlefty = -26.58 * gaScale / 100 * factor;           // -1508 (previously calculated)
    var upperrightx = (36.12 - 18.06) * gaScale / 100 * factor; // 1024 (previously calculated)
    var upperrighty = 14.34 * gaScale / 100 * factor;           // 812 (previously calculated)
    var initialx = 5;
    var initialy = -10;
    var initialzoom = -2.75;
    var map0 = loadLeaflet(imageoverlay,lowerleftx,lowerlefty,upperrightx,upperrighty, initialx,initialy,initialzoom);

    // getCustomMarker(0,0,null,'P0',true,0).addTo(map0);
    // getCustomMarker(5.44*250/100,0,null,'P20',true,0).addTo(map0);
    // getCustomMarker(11.84*250/100,0,null,'P40',true,0).addTo(map0);
    // getCustomMarker(18.24*250/100,0,null,'P60',true,0).addTo(map0);
    // getCustomMarker(37.43*250/100,0,null,'P120',true,0).addTo(map0);
    // getCustomMarker(43.82*250/100,0,null,'P140',true,0).addTo(map0);
    // getCustomMarker(50.21*250/100,0,null,'P160',true,0).addTo(map0);
    // getCustomMarker(55.99*250/100,0,null,'P180',true,0).addTo(map0);
    // getCustomMarker(61.37*250/100,0,null,'P200',true,0).addTo(map0);
    // getCustomMarker(66.16*250/100,0,null,'P220',true,0).addTo(map0);

    var mqSettings=Android.getMQSettings();
    mqSettingsArray=mqSettings.split(',');
    mqAddress=mqSettingsArray[0];
    mqUser=mqSettingsArray[1];
    mqPassword=mqSettingsArray[2];
    mqTopic=mqSettingsArray[3];
    mqPort=mqSettingsArray[4];
    //mqAddress=parent.document.getElementById('txtboxRabbitMQserver').value;
    //mqUser=parent.document.getElementById('txtboxRabbitMQuser').value;
    //mqPassword=parent.document.getElementById('txtboxRabbitMQpassword').value;
    //mqTopic=parent.document.getElementById('txtboxRabbitMQtopic').value;
    // console.debug("mqAddress",mqAddress);
    // console.debug("mqUser",mqUser);
    // console.debug("mqPassword",mqPassword);
    // console.debug("mqTopic",mqTopic);
    initRabbit(mqAddress,mqUser,mqPassword,mqTopic,mqPort);

</script>
</body>
</html>